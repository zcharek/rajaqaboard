/*! For license information please see 670.05182e29.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkqatouch_dashboard=self.webpackChunkqatouch_dashboard||[]).push([[670],{516:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(995).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},670:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(43),r=t(861),i=t(360),n=t(516);const l=(0,t(995).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=t(823),d=t(579);const c=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),[x,p]=(0,a.useState)(null),h=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"highest":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":case"moyenne":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";case"lowest":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"bug":return"bg-red-100 text-red-800";case"task":return"bg-blue-100 text-blue-800";case"story":return"bg-green-100 text-green-800";case"epic":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"done":case"closed":case"resolved":return"bg-green-100 text-green-800";case"in progress":case"testing":return"bg-blue-100 text-blue-800";case"to do":case"open":default:return"bg-gray-100 text-gray-800";case"blocked":case"waiting":return"bg-red-100 text-red-800"}},f=(0,a.useCallback)(async()=>{l(!0),m(null);try{const e=await(0,o.SX)();s(e),p(new Date)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des tickets TNR:",e),m("Erreur lors de la r\xe9cup\xe9ration des tickets: ".concat(e.message))}finally{l(!1)}},[]);(0,a.useEffect)(()=>{f()},[f]);const b=(0,a.useCallback)(()=>{f()},[f]);return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,d.jsx)("div",{className:"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-10",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,d.jsx)(r.A,{className:"h-8 w-8 text-orange-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"TNR - DF QA Automation"}),(0,d.jsx)("p",{className:"text-gray-600",children:'Tickets du board "DF QA Automation" du projet AUT n\xe9cessitant une attention particuli\xe8re'})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[x&&(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["Derni\xe8re mise \xe0 jour : ",(j=x.toISOString(),new Date(j).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))]}),(0,d.jsxs)("button",{onClick:b,disabled:t,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[t?(0,d.jsx)(i.A,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(n.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:"Actualiser"})]})]})]})})}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-6",children:[t&&(0,d.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(i.A,{className:"h-12 w-12 text-orange-600 animate-spin mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Chargement des tickets TNR..."}),(0,d.jsx)("p",{className:"text-gray-600",children:'R\xe9cup\xe9ration des points d\'attention du board "DF QA Automation"'})]})}),c&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(r.A,{className:"h-6 w-6 text-red-600"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-red-800",children:"Erreur"}),(0,d.jsx)("p",{className:"text-red-600 mt-1",children:c})]})]})}),!t&&!c&&e.length>0&&(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,d.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 px-6 py-4 border-b border-orange-200",children:(0,d.jsxs)("h3",{className:"text-lg font-semibold text-orange-900",children:["Tickets en point d'attention (",e.length,")"]})}),(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)("div",{className:"space-y-4",children:e.map(e=>{var s,t;return(0,d.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white hover:border-orange-300",children:[(0,d.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.key}),(0,d.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(g(null===(s=e.fields.issuetype)||void 0===s?void 0:s.name)),children:(null===(t=e.fields.issuetype)||void 0===t?void 0:t.name)||"Issue"}),e.fields.priority&&(0,d.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(h(e.fields.priority.name)),children:e.fields.priority.name})]}),(0,d.jsx)("h5",{className:"text-xl font-medium text-gray-900 mb-3",children:e.fields.summary}),e.fields.issuelinks&&e.fields.issuelinks.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsxs)("h6",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,d.jsxs)("span",{children:["Tickets li\xe9s (",e.fields.issuelinks.length,")"]})]}),(0,d.jsx)("div",{className:"space-y-2",children:e.fields.issuelinks.map(e=>(0,d.jsx)(u,{link:e,getIssueTypeColor:g,getPriorityColor:h,getStatusColor:y},e.id))})]})]})}),(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)("a",{href:"https://raja-group.atlassian.net/browse/".concat(e.key),target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm font-medium",children:"Voir dans Jira"})})]},e.id)})})})]}),!t&&!c&&0===e.length&&(0,d.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(r.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun ticket en point d'attention"}),(0,d.jsx)("p",{className:"text-gray-600",children:'Tous les tickets du board "DF QA Automation" ont \xe9t\xe9 trait\xe9s ou ne n\xe9cessitent plus d\'attention particuli\xe8re.'})]})})]})]});var j},u=a.memo(e=>{let{link:s,getIssueTypeColor:t,getPriorityColor:a,getStatusColor:r}=e;const i=s.inwardIssue||s.outwardIssue;return i?(0,d.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-900",children:i.key}),(0,d.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t(i.fields.issuetype.name)),children:i.fields.issuetype.name}),i.fields.priority&&(0,d.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(a(i.fields.priority.name)),children:i.fields.priority.name})]}),(0,d.jsx)("p",{className:"text-sm text-gray-700",children:i.fields.summary}),(0,d.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,d.jsx)("span",{className:"px-2 py-1 rounded-full ".concat(r(i.fields.status.name)),children:i.fields.status.name}),i.fields.assignee&&(0,d.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,d.jsx)(l,{className:"h-3 w-3"}),(0,d.jsx)("span",{children:i.fields.assignee.displayName})]})]})]}),(0,d.jsx)("a",{href:"https://raja-group.atlassian.net/browse/".concat(i.key),target:"_blank",rel:"noopener noreferrer",className:"ml-3 px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors",children:"Voir"})]})}):null});u.displayName="LinkedTicket";const m=a.memo(c)},823:(e,s,t)=>{t.d(s,{SX:()=>m,ut:()=>d});var a=t(555),r=t(722);const i={apiToken:{NODE_ENV:"production",PUBLIC_URL:"/rajaqaboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_JIRA_QA_DASHBOARD||"",email:{NODE_ENV:"production",PUBLIC_URL:"/rajaqaboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_JIRA_EMAIL||"boubker.bribri.ext@raja.fr"},n={Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},l={username:i.email,password:i.apiToken},o=[{name:"SPC Board",projectKey:"SPC"},{name:"SP board",projectKey:"SP"},{name:"GOGETA board",projectKey:"GOG"},{name:"NEXT",projectKey:"NEXT"}],d=async()=>{try{let e=[],s=0;const t=50;let i=0,d=!1;do{const a=await r.A.get("/rest/agile/1.0/board?startAt=".concat(s,"&maxResults=").concat(t),{headers:n,auth:l,timeout:15e3});if(!a.data||!a.data.values)break;e=[...e,...a.data.values],i=a.data.total,d=a.data.isLast,s+=t}while(!d&&s<i);const m=e.filter(e=>{if(!e.location||!e.location.projectKey)return!1;const s=e.location.projectKey.toUpperCase(),t=e.name;return o.some(e=>e.name===t&&e.projectKey.toUpperCase()===s)});return await Promise.all(m.map(async e=>{try{const s=(await c(e.id)).find(e=>"active"===e.state);let t=0,r=0,i=0,n=0,l=0,o=[],d=[];if(s){const e=await u(s.id);t=e.length;r=e.filter(e=>{const s=e.fields.status.name;return["FERM\xc9","R\xc9SOLU"].includes(s)}).length,i=t>0?Math.round(r/t*100):0;const a=e.filter(e=>e.fields.fixVersions&&e.fields.fixVersions.length>0),c=a.filter(e=>{const s=e.fields.status.name;return["FERM\xc9","R\xc9SOLU"].includes(s)}),m=a.filter(e=>{const s=e.fields.status.name;return!["FERM\xc9","R\xc9SOLU"].includes(s)}).map(e=>e.key);n=a.length,l=c.length,o=m,d=a.map(e=>({key:e.key,summary:e.fields.summary,status:e.fields.status.name,fixVersions:e.fields.fixVersions.map(e=>e.name)}))}return(0,a.A)((0,a.A)({},e),{},{currentSprint:s,ticketCount:t,completedTicketCount:r,sprintProgress:i,ticketsWithFixVersion:n,completedTicketsWithFixVersion:l,pendingTicketsWithFixVersion:o,ticketsWithFixVersionDetails:d})}catch(s){return console.error("Error fetching details for board ".concat(e.name,":"),s),(0,a.A)((0,a.A)({},e),{},{currentSprint:void 0,ticketCount:0,completedTicketCount:0,sprintProgress:0,ticketsWithFixVersion:0,completedTicketsWithFixVersion:0,pendingTicketsWithFixVersion:[],ticketsWithFixVersionDetails:[]})}}))}catch(t){var e,s;if(console.error("Error fetching Jira boards:",t),r.A.isAxiosError(t))console.error("Response status:",null===(e=t.response)||void 0===e?void 0:e.status),console.error("Response data:",null===(s=t.response)||void 0===s?void 0:s.data);throw new Error("Failed to fetch Jira boards: ".concat(t))}},c=async e=>{try{return(await r.A.get("/rest/agile/1.0/board/".concat(e,"/sprint"),{headers:n,auth:l,params:{state:"active,future",maxResults:50},timeout:15e3})).data.values||[]}catch(s){return console.error("Error fetching Jira board sprints for board ".concat(e,":"),s),[]}},u=async e=>{try{return(await r.A.get("/rest/agile/1.0/sprint/".concat(e,"/issue"),{headers:n,auth:l,params:{maxResults:1e3,fields:"summary,status,issuetype,assignee,priority,storypoints,fixVersions"},timeout:15e3})).data.issues||[]}catch(s){return console.error("Error fetching sprint issues for sprint ".concat(e,":"),s),[]}},m=async()=>{try{const e=await r.A.get("/rest/agile/1.0/board/349/issue",{headers:n,auth:l,params:{jql:'project = AUT AND status = "Point d\'attention"',maxResults:100,fields:"summary,status,assignee,priority,created,updated,issuetype,description,issuelinks"}});if(e.data&&e.data.issues){return await Promise.all(e.data.issues.map(async e=>{try{const s=await r.A.get("/rest/api/3/issue/".concat(e.key,"?fields=issuelinks"),{headers:n});s.data&&s.data.fields&&s.data.fields.issuelinks&&(e.fields.issuelinks=s.data.fields.issuelinks)}catch(s){}return e}))}return[]}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des tickets TNR:",e),new Error("Erreur lors de la r\xe9cup\xe9ration des tickets TNR: ".concat(e.message))}}},861:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(995).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=670.05182e29.chunk.js.map