/*! For license information please see 899.ce9dbf1d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkqatouch_dashboard=self.webpackChunkqatouch_dashboard||[]).push([[899],{165:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(995).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},319:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(995).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},516:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(995).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},613:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(995).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},823:(e,s,t)=>{t.d(s,{SX:()=>m,ut:()=>d});var r=t(555),a=t(722);const i={apiToken:{NODE_ENV:"production",PUBLIC_URL:"/rajaqaboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_JIRA_QA_DASHBOARD||"",email:{NODE_ENV:"production",PUBLIC_URL:"/rajaqaboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_JIRA_EMAIL||"boubker.bribri.ext@raja.fr"},l={Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},n={username:i.email,password:i.apiToken},c=[{name:"SPC Board",projectKey:"SPC"},{name:"SP board",projectKey:"SP"},{name:"GOGETA board",projectKey:"GOG"},{name:"NEXT",projectKey:"NEXT"}],d=async()=>{try{let e=[],s=0;const t=50;let i=0,d=!1;do{const r=await a.A.get("/rest/agile/1.0/board?startAt=".concat(s,"&maxResults=").concat(t),{headers:l,auth:n,timeout:15e3});if(!r.data||!r.data.values)break;e=[...e,...r.data.values],i=r.data.total,d=r.data.isLast,s+=t}while(!d&&s<i);const m=e.filter(e=>{if(!e.location||!e.location.projectKey)return!1;const s=e.location.projectKey.toUpperCase(),t=e.name;return c.some(e=>e.name===t&&e.projectKey.toUpperCase()===s)});return await Promise.all(m.map(async e=>{try{const s=(await o(e.id)).find(e=>"active"===e.state);let t=0,a=0,i=0,l=0,n=0,c=[],d=[];if(s){const e=await x(s.id);t=e.length;a=e.filter(e=>{const s=e.fields.status.name;return["FERM\xc9","R\xc9SOLU"].includes(s)}).length,i=t>0?Math.round(a/t*100):0;const r=e.filter(e=>e.fields.fixVersions&&e.fields.fixVersions.length>0),o=r.filter(e=>{const s=e.fields.status.name;return["FERM\xc9","R\xc9SOLU"].includes(s)}),m=r.filter(e=>{const s=e.fields.status.name;return!["FERM\xc9","R\xc9SOLU"].includes(s)}).map(e=>e.key);l=r.length,n=o.length,c=m,d=r.map(e=>({key:e.key,summary:e.fields.summary,status:e.fields.status.name,fixVersions:e.fields.fixVersions.map(e=>e.name)}))}return(0,r.A)((0,r.A)({},e),{},{currentSprint:s,ticketCount:t,completedTicketCount:a,sprintProgress:i,ticketsWithFixVersion:l,completedTicketsWithFixVersion:n,pendingTicketsWithFixVersion:c,ticketsWithFixVersionDetails:d})}catch(s){return console.error("Error fetching details for board ".concat(e.name,":"),s),(0,r.A)((0,r.A)({},e),{},{currentSprint:void 0,ticketCount:0,completedTicketCount:0,sprintProgress:0,ticketsWithFixVersion:0,completedTicketsWithFixVersion:0,pendingTicketsWithFixVersion:[],ticketsWithFixVersionDetails:[]})}}))}catch(t){var e,s;if(console.error("Error fetching Jira boards:",t),a.A.isAxiosError(t))console.error("Response status:",null===(e=t.response)||void 0===e?void 0:e.status),console.error("Response data:",null===(s=t.response)||void 0===s?void 0:s.data);throw new Error("Failed to fetch Jira boards: ".concat(t))}},o=async e=>{try{return(await a.A.get("/rest/agile/1.0/board/".concat(e,"/sprint"),{headers:l,auth:n,params:{state:"active,future",maxResults:50},timeout:15e3})).data.values||[]}catch(s){return console.error("Error fetching Jira board sprints for board ".concat(e,":"),s),[]}},x=async e=>{try{return(await a.A.get("/rest/agile/1.0/sprint/".concat(e,"/issue"),{headers:l,auth:n,params:{maxResults:1e3,fields:"summary,status,issuetype,assignee,priority,storypoints,fixVersions"},timeout:15e3})).data.issues||[]}catch(s){return console.error("Error fetching sprint issues for sprint ".concat(e,":"),s),[]}},m=async()=>{try{const e=await a.A.get("/rest/agile/1.0/board/349/issue",{headers:l,auth:n,params:{jql:'project = AUT AND status = "Point d\'attention"',maxResults:100,fields:"summary,status,assignee,priority,created,updated,issuetype,description,issuelinks"}});if(e.data&&e.data.issues){return await Promise.all(e.data.issues.map(async e=>{try{const s=await a.A.get("/rest/api/3/issue/".concat(e.key,"?fields=issuelinks"),{headers:l});s.data&&s.data.fields&&s.data.fields.issuelinks&&(e.fields.issuelinks=s.data.fields.issuelinks)}catch(s){}return e}))}return[]}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des tickets TNR:",e),new Error("Erreur lors de la r\xe9cup\xe9ration des tickets TNR: ".concat(e.message))}}},861:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(995).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},899:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var r=t(43),a=t(823),i=t(613),l=t(516),n=t(830),c=t(995);const d=(0,c.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var o=t(165),x=t(319),m=t(861);const u=(0,c.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=(0,c.A)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var p=t(914),g=t(579);const y=e=>{let{refreshData:s}=e;const[t,c]=(0,r.useState)([]),[y,f]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),k=async()=>{try{f(!0),j(null);const e=await(0,a.ut)();c(e)}catch(e){j(e instanceof Error?e.message:"Erreur lors du chargement des boards"),console.error("Error loading Jira boards:",e)}finally{f(!1)}};(0,r.useEffect)(()=>{k()},[]);const w=()=>{k()};return b?(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-8",children:(0,g.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl border border-red-200 p-12 max-w-md w-full text-center",children:[(0,g.jsx)("div",{className:"bg-red-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:(0,g.jsx)(i.A,{className:"h-10 w-10 text-red-600"})}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur de chargement"}),(0,g.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:b}),(0,g.jsxs)("button",{onClick:w,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[(0,g.jsx)(l.A,{className:"h-5 w-5 mr-3"}),"R\xe9essayer"]})]})}):(0,g.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:(0,g.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[y?(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((e,s)=>(0,g.jsx)("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg border border-white/50 p-8 animate-pulse",children:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("div",{className:"h-8 bg-gray-200 rounded-xl"}),(0,g.jsx)("div",{className:"h-4 bg-gray-200 rounded-lg w-2/3"}),(0,g.jsx)("div",{className:"h-4 bg-gray-200 rounded-lg w-1/2"}),(0,g.jsx)("div",{className:"h-20 bg-gray-200 rounded-xl"})]})},s))}):(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map(e=>{var s;return(0,g.jsxs)("div",{className:"bg-white/90 backdrop-blur-lg rounded-2xl shadow-lg border border-white/50 p-8 hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 group",children:[(0,g.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,g.jsx)("div",{className:"flex-1",children:(0,g.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors",children:e.name})})}),e.currentSprint&&(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,g.jsx)("div",{className:"bg-green-100 p-2 rounded-lg",children:(0,g.jsx)(n.A,{className:"h-4 w-4 text-green-600"})}),(0,g.jsx)("span",{className:"font-semibold text-green-800",children:"Sprint Actuel"})]}),(0,g.jsxs)("p",{className:"text-green-700 font-medium text-sm",children:[e.currentSprint.name,e.ticketCount&&(0,g.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.ticketCount," tickets)"]})]})]}),e.currentSprint&&(0,g.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)(d,{className:"h-4 w-4 text-blue-600"}),(0,g.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progression du sprint"}),(0,g.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["(",e.completedTicketCount||0,"/",e.ticketCount||0," tickets)"]})]}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,g.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(e.sprintProgress||0,"%")}})}),(0,g.jsxs)("div",{className:"absolute -top-8 right-0 bg-gray-900 text-white text-xs px-2 py-1 rounded",children:[e.sprintProgress||0,"%"]})]})]}),e.ticketsWithFixVersion&&e.ticketsWithFixVersion>0&&(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)(o.A,{className:"h-4 w-4 text-orange-600"}),(0,g.jsx)("span",{className:"font-semibold text-orange-800",children:"Tickets de release"})]}),(0,g.jsx)("span",{className:"text-lg font-bold text-orange-700",children:e.ticketsWithFixVersion})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(x.A,{className:"h-4 w-4 text-green-600"}),(0,g.jsxs)("span",{className:"text-green-700",children:[e.completedTicketsWithFixVersion||0," termin\xe9s"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(m.A,{className:"h-4 w-4 text-orange-600"}),(0,g.jsxs)("span",{className:"text-orange-700",children:[(null===(s=e.pendingTicketsWithFixVersion)||void 0===s?void 0:s.length)||0," en attente"]})]})]})]}),(0,g.jsx)("div",{className:"border-t border-gray-100 pt-4",children:(0,g.jsxs)("button",{onClick:()=>{N(v===e.id?null:e.id)},className:"w-full flex items-center justify-center space-x-2 px-4 py-3 text-blue-600 hover:text-blue-800 font-medium transition-all duration-300 hover:bg-blue-50 rounded-xl group",children:[(0,g.jsx)(u,{className:"h-4 w-4"}),(0,g.jsx)("span",{children:v===e.id?"Masquer les d\xe9tails":"Voir les d\xe9tails"})]})}),v===e.id&&e.ticketsWithFixVersionDetails&&(0,g.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[(0,g.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,g.jsx)(h,{className:"h-5 w-5 text-blue-600"}),(0,g.jsx)("span",{children:"Tickets assign\xe9e \xe0 la release"})]}),(0,g.jsx)("div",{className:"space-y-4",children:e.ticketsWithFixVersionDetails.map(e=>(0,g.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200 hover:border-blue-300 transition-all duration-300",children:(0,g.jsx)("div",{className:"flex items-start justify-between",children:(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,g.jsx)("span",{className:"font-mono text-sm bg-blue-100 text-blue-800 px-3 py-1 rounded-lg font-semibold",children:e.key}),(0,g.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full ".concat("FERM\xc9"===e.status||"R\xc9SOLU"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,g.jsx)("p",{className:"text-gray-900 font-medium mb-3 text-sm leading-relaxed",children:e.summary}),(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)(h,{className:"h-4 w-4 text-blue-600"}),(0,g.jsxs)("span",{className:"text-xs text-gray-600 font-medium",children:["Versions: ",e.fixVersions.join(", ")]})]})]})})},e.key))})]})]},e.id)})}),!y&&0===t.length&&(0,g.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,g.jsxs)("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/50 p-12 text-center max-w-md",children:[(0,g.jsx)("div",{className:"bg-gray-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:(0,g.jsx)(p.A,{className:"h-10 w-10 text-gray-400"})}),(0,g.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Aucun sprint trouv\xe9"}),(0,g.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Aucun sprint Jira n'est accessible avec les permissions actuelles."})]})})]})})}}}]);
//# sourceMappingURL=899.ce9dbf1d.chunk.js.map